[
  {
    "id": "f1e01be6.3add08",
    "type": "inject",
    "z": "cf3a9c97.ac6d88",
    "name": "Remove all data",
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "repeat": "",
    "crontab": "",
    "once": false,
    "x": 1186.6285400390625,
    "y": 628.8428955078125,
    "wires": [
      [
        "4241113e.ffa47"
      ]
    ]
  },
  {
    "id": "23096760.ac0198",
    "type": "inject",
    "z": "cf3a9c97.ac6d88",
    "name": "Reload UI",
    "topic": "",
    "payload": "",
    "payloadType": "date",
    "repeat": "0.4",
    "crontab": "",
    "once": true,
    "x": 756.8035888671875,
    "y": 515.2054443359375,
    "wires": [
      [
        "fb0e1146.865968"
      ]
    ]
  },
  {
    "id": "4241113e.ffa47",
    "type": "function",
    "z": "cf3a9c97.ac6d88",
    "name": "Remove all data",
    "func": "flow.set(\"imageData\", undefined);\n\nreturn null;\n",
    "outputs": 1,
    "noerr": 0,
    "x": 1397.62841796875,
    "y": 579.54296875,
    "wires": [
      []
    ]
  },
  {
    "id": "efff0855.7da4f",
    "type": "function",
    "z": "cf3a9c97.ac6d88",
    "name": "Store Image Data",
    "func": "// get all the image data\nlet imageData = flow.get(\"imageData\") || [];\n\n// store the image\nimageData.push({\n    \"timestamp\": new Date(),\n    \"image\": msg.payload.image\n});\n\nflow.set(\"imageData\", imageData)\n\nreturn {payload: imageData};",
    "outputs": 1,
    "noerr": 0,
    "x": 498,
    "y": 517.6429443359375,
    "wires": [
      [
        "d59363b9.e5ce7"
      ]
    ]
  },
  {
    "id": "34f96041.6bc3e8",
    "type": "http in",
    "z": "cf3a9c97.ac6d88",
    "name": "Image Upload",
    "url": "/image-upload2",
    "method": "post",
    "upload": true,
    "swaggerDoc": "",
    "x": 75,
    "y": 519.1429443359375,
    "wires": [
      [
        "5e5acad0.7c92cc",
        "efff0855.7da4f"
      ]
    ]
  },
  {
    "id": "5e5acad0.7c92cc",
    "type": "http response",
    "z": "cf3a9c97.ac6d88",
    "name": "Success Response",
    "statusCode": "200",
    "headers": {
      "Access-Control-Allow-Origin": "*"
    },
    "x": 299,
    "y": 665.1429443359375,
    "wires": []
  },
  {
    "id": "45a17ea7.3ea218",
    "type": "ui_button",
    "z": "cf3a9c97.ac6d88",
    "name": "Clear Data",
    "group": "e963ee72.4c994",
    "order": 0,
    "width": "0",
    "height": "0",
    "passthru": false,
    "label": "Clear Data",
    "color": "",
    "bgcolor": "",
    "icon": "camera",
    "payload": "true",
    "payloadType": "bool",
    "topic": "",
    "x": 1179.75,
    "y": 530.6429443359375,
    "wires": [
      [
        "4241113e.ffa47"
      ]
    ]
  },
  {
    "id": "74f32960.0fb1a",
    "type": "ui_template",
    "z": "cf3a9c97.ac6d88",
    "group": "e963ee72.4c994",
    "name": "List of all images",
    "order": 6,
    "width": "12",
    "height": "15",
    "format": "<md-list style=\"display: grid; grid-template-columns: 50% 50%;\">\n    <md-list-item class=\"md-3-line\" ng-repeat=\"image in msg.payload | orderBy:'-timestamp'\">\n        \n        <md-card style=\"box-shadow: 1px 1px 2px 0 lightgray;\">\n            <img ng-src=\"{{image.image}}\" class=\"md-card-image\" alt=\"No image available.\">\n            <md-card-title>\n              <md-card-title-text>\n                <span class=\"md-headline\">Classification</span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content>\n              <p>\n                Score\n              </p>\n            </md-card-content>\n        </md-card>\n        \n    </md-list-item>\n</md-list>",
    "storeOutMessages": true,
    "fwdInMessages": false,
    "templateScope": "local",
    "x": 1146,
    "y": 348,
    "wires": [
      []
    ]
  },
  {
    "id": "fb0e1146.865968",
    "type": "function",
    "z": "cf3a9c97.ac6d88",
    "name": "Load Images",
    "func": "let imageData = flow.get(\"imageData\");\n\n// check if their is an image for the selected deivce\nif (imageData !== undefined) {\n    return {\"payload\":imageData};   \n} else {\n    return {\"payload\":\"\"};\n}",
    "outputs": 1,
    "noerr": 0,
    "x": 953,
    "y": 404,
    "wires": [
      [
        "74f32960.0fb1a"
      ]
    ]
  },
  {
    "id": "d59363b9.e5ce7",
    "type": "debug",
    "z": "cf3a9c97.ac6d88",
    "name": "",
    "active": true,
    "console": "false",
    "complete": "true",
    "x": 471.5,
    "y": 627.5,
    "wires": []
  },
  {
    "id": "e963ee72.4c994",
    "type": "ui_group",
    "z": "",
    "name": "Image List",
    "tab": "b3f31fc8.291a18",
    "disp": false,
    "width": "22"
  },
  {
    "id": "b3f31fc8.291a18",
    "type": "ui_tab",
    "z": "",
    "name": "Visual Recognition",
    "icon": "camera"
  }
]
